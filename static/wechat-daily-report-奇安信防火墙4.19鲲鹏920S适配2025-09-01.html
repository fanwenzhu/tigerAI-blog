<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奇安信防火墙鲲鹏适配日报 - 2025-08-29 ~ 2025-09-01</title>
    <link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-100-M/font-awesome/6.0.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoVBL5rLesXWW/sGuLhYFChxgYnz2Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-primary: #f5f4ee;
            --bg-secondary: #faf9f6;
            --bg-tertiary: #f1f3f5;
            --text-primary: #212529;
            --text-secondary: #495057;
            --accent-primary: #ff8906;
            --accent-secondary: #f76707;
            --accent-tertiary: #e8590c;
            --accent-blue: #339af0;
            --accent-purple: #7048e8;
            --accent-cyan: #22b8cf;
            --highlight-keyword-bg: #ffe8cc;
            --highlight-name-color: #7048e8;
            --card-padding: 24px;
            --grid-gap: 16px;
            --card-radius: 12px;
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            --font-family: 'Inter', 'SF Pro Display', 'Segoe UI', sans-serif;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: var(--font-family);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        body.modal-active {
            overflow: hidden;
        }
        h1, h2, h3, h4 {
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        h1 .brand-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 400;
            display: block;
            margin-top: 8px;
        }
        h2 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            color: var(--accent-primary);
        }
        h3 {
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
            color: var(--accent-blue);
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-auto-rows: minmax(100px, auto);
            gap: var(--grid-gap);
            margin-top: 20px;
            grid-template-areas:
                "main      main      main      main      main      main      main      main      main      main      main      main"
                "topics    topics    topics    topics    topics    topics    topics    topics    topics    topics    topics    topics"
                "mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap   mindmap"
                "quote     quote     quote     quote     quote     quote     links     links     links     links     links     links"
                "stats     stats     stats     stats     stats     stats     stats     wordcloud wordcloud wordcloud wordcloud wordcloud";
        }
        .card {
            background-color: var(--bg-secondary);
            border-radius: var(--card-radius);
            padding: var(--card-padding);
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent-primary);
        }
        .card-icon {
            position: absolute;
            bottom: var(--card-padding);
            right: var(--card-padding);
            font-size: 4rem;
            opacity: 0.07;
            color: var(--accent-primary);
            z-index: 0;
        }
        .main-card { grid-area: main; }
        .topic-cards-wrapper {
            grid-area: topics;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: var(--grid-gap);
        }
        .mindmap-card-container { grid-area: mindmap; }
        .quote-card { grid-area: quote; }
        .links-card { grid-area: links; }
        .stats-card { grid-area: stats; }
        .wordcloud-card { grid-area: wordcloud; }
        .topic-card {
            grid-column: span 6;
            min-height: 250px;
        }
        .topic-card > .topic-card-content-wrapper {
            flex-grow: 1;
            padding-bottom: 1rem;
        }
        .topic-cards-wrapper > .topic-card:nth-last-child(1):nth-child(odd) {
            grid-column: span 12;
        }
        .main-card h1 { text-align: center; }
        .main-card .date { text-align: center; }
        .date { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 1rem; }
        .meta-info { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 1rem; justify-content: center; }
        .meta-info span { background-color: var(--bg-tertiary); padding: 5px 10px; border-radius: 20px; font-size: 0.9rem; color: var(--accent-blue); }
        .summary { margin-top: 1rem; line-height: 1.7; text-align: left; }
        .topic-category { display: inline-block; background-color: var(--accent-tertiary); color: var(--bg-primary); padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; margin-bottom: 0.5rem; }
        .topic-keywords { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 0.75rem; margin-bottom: 0.75rem; }
        .keyword { background-color: var(--bg-tertiary); color: var(--accent-primary); padding: 3px 8px; border-radius: 4px; font-size: 0.8rem; }
        .highlight-keyword { background-color: var(--highlight-keyword-bg); padding: 1px 2px; border-radius: 2px; font-weight: 500; display: inline; line-height: 1.2; box-decoration-break: clone; -webkit-box-decoration-break: clone; }
        .highlight-name { color: var(--highlight-name-color); font-weight: 500; }
        .topic-mentions { font-size: 0.9rem; color: var(--text-secondary); }
        .quote { position: relative; padding-left: 20px; margin: 10px 0; font-style: italic; color: var(--text-secondary); }
        .quote::before { content: '"'; position: absolute; left: 0; top: 0; font-size: 1.5rem; color: var(--accent-tertiary); }
        .quote-author { text-align: right; font-size: 0.9rem; color: var(--accent-tertiary); margin-top: 5px; }
        .link-item { display: flex; align-items: center; margin-bottom: 10px; padding: 8px; border-radius: 6px; background-color: var(--bg-tertiary); transition: background-color 0.2s ease; text-decoration: none; }
        .link-item:hover { background-color: rgba(51, 154, 240, 0.1); }
        .link-item a { text-decoration: none; color: inherit; display: flex; align-items: center; width: 100%; }
        .link-item a:hover .link-title { text-decoration: underline; color: var(--accent-blue); }
        .link-icon { margin-right: 10px; color: var(--accent-blue); }
        .link-title { flex-grow: 1; color: var(--text-primary); }
        .link-title.is-link { color: var(--accent-blue); }
        .link-title.is-link:hover { text-decoration: underline; }
        .user-stats-table { width: 100%; border-collapse: collapse; margin-top: 0.5rem; }
        .user-stats-table th { text-align: center; padding: 0.75rem 0.5rem; border-bottom: 2px solid var(--accent-primary); color: var(--text-primary); font-weight: 600; font-size: 0.9rem; }
        .user-stats-table td { padding: 0.75rem 0.5rem; border-bottom: 1px solid var(--bg-tertiary); color: var(--text-secondary); font-size: 0.85rem; vertical-align: top; text-align: left; }
        .user-stats-table .user-name-col { width: 25%; font-weight: 500; word-break: break-all; }
        .user-stats-table .message-count-col { text-align: center; width: 15%; white-space: nowrap; }
        .user-stats-table .contribution-col { width: 60%; word-break: break-all; }
        .user-stats-table tr:last-child td { border-bottom: none; }
        .wordcloud { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 10px; padding: 20px 0; }
        .wordcloud-item { padding: 5px 10px; border-radius: 4px; font-weight: 500; transition: transform 0.2s ease; }
        .wordcloud-item:hover { transform: scale(1.1); }
        .size-1 { font-size: 0.9rem; color: var(--text-secondary); }
        .size-2 { font-size: 1.1rem; color: var(--accent-cyan); }
        .size-3 { font-size: 1.3rem; color: var(--accent-blue); }
        .size-4 { font-size: 1.5rem; color: var(--accent-purple); }
        .size-5 { font-size: 1.8rem; color: var(--accent-tertiary); }
        .action-buttons-container { text-align: center; margin: 20px 0; padding-bottom: 20px; }
        .action-button { background-color: var(--accent-primary); color: white; border: none; padding: 10px 20px; border-radius: var(--card-radius); font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; margin: 5px 10px; box-shadow: var(--card-shadow); display: inline-flex; align-items: center; justify-content: center; }
        .action-button:hover { background-color: var(--accent-secondary); transform: translateY(-2px); }
        .action-button i, .action-button .fas { margin-right: 8px; }
        .footer { margin-top: 30px; text-align: center; color: var(--text-secondary); font-size: 0.9rem; }
        #report-content-wrapper .footer { margin-top: 30px; padding-bottom: 20px; }
        .brand-footer {
            border-top: 1px solid var(--bg-tertiary);
            padding-top: 20px;
            margin-top: 20px;
        }
        .brand-footer p {
            margin-bottom: 8px;
        }
        .brand-footer .tech-stack {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 15px;
        }
        .mindmap-card { min-height: 400px; }
        .mindmap-card h2 i { margin-right: 8px; }
        .mindmap-controls { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; flex-wrap: wrap; }
        .mindmap-controls button { background-color: var(--accent-blue); color: white; border: none; padding: 8px 12px; border-radius: var(--card-radius); font-size: 0.9rem; cursor: pointer; transition: background-color 0.2s ease; font-weight: 500; display: inline-flex; align-items: center; justify-content: center; }
        .mindmap-controls button:hover { background-color: #228be6; }
        .mindmap-controls button i { margin-right: 5px; }
        .mindmap-controls .fullscreen-toggle-btn { margin-left: auto; }
        .mermaid-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; overflow: auto; background-color: #fff; border-radius: 8px; padding: 10px; border: 1px solid var(--bg-tertiary); min-height: 300px; cursor: grab; }
        .mermaid-container.dragging { cursor: grabbing; }
        .mermaid-container:empty::before { content: "在此处生成或粘贴Mermaid导图代码。"; color: var(--text-secondary); font-style: italic; text-align: center; padding: 20px; }
        .mermaid-container svg { max-width: none; height: auto; display: block; transition: transform 0.2s ease-out; }
        #mermaid-main-feedback-message, #mermaid-modal-feedback-message { text-align: center; margin-top: 15px; padding: 8px; border-radius: 4px; font-weight: 500; font-size: 0.9rem; display: none; }
        #mermaid-main-feedback-message.success, #mermaid-modal-feedback-message.success { color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; display: block; }
        #mermaid-main-feedback-message.error, #mermaid-modal-feedback-message.error { color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; display: block; }
        #mermaid-main-feedback-message.info, #mermaid-modal-feedback-message.info { color: #0c5460; background-color: #d1ecf1; border: 1px solid #bee5eb; display: block; }
        #feedback-message { text-align: center; margin-top: 10px; font-weight: 500; }
        #feedback-message.success { color: green; }
        #feedback-message.error { color: red; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal-content { width: 95%; height: 90%; max-width: 1200px; }
        .modal-close-btn { position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 2.2rem; color: var(--text-secondary); cursor: pointer; line-height: 1; padding: 5px; z-index: 1010; }
        .modal-close-btn:hover { color: var(--text-primary); }
        #modalMermaidContainer { flex-grow: 1; min-height: 0; }
        #modalMermaidContainer:empty::before { content: "导图内容将在此显示。"; color: var(--text-secondary); font-style: italic; text-align: center; padding: 20px; display: flex; justify-content: center; align-items: center; height: 100%; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card { animation: fadeIn 0.5s ease forwards; }
        .main-card { animation-delay: 0.1s; }
        .topic-cards-wrapper .topic-card:nth-child(1) { animation-delay: 0.2s; }
        .topic-cards-wrapper .topic-card:nth-child(2) { animation-delay: 0.3s; }
        .topic-cards-wrapper .topic-card:nth-child(3) { animation-delay: 0.4s; }
        .topic-cards-wrapper .topic-card:nth-child(4) { animation-delay: 0.5s; }
        .mindmap-card-container .card { animation-delay: 0.6s; }
        .quote-card { animation-delay: 0.7s; }
        .links-card { animation-delay: 0.8s; }
        .stats-card { animation-delay: 0.9s; }
        .wordcloud-card { animation-delay: 1.0s; }
        #report-content-wrapper .footer { animation: fadeIn 0.5s ease forwards; animation-delay: 1.1s; }
        .action-buttons-container { animation: fadeIn 0.5s ease forwards; animation-delay: 1.2s; }
        @media (max-width: 768px) {
            body { padding: 10px; font-size: 14px; }
            h1 { font-size: 1.8rem; }
            h2 { font-size: 1.4rem; }
            h3 { font-size: 1.1rem; }
            .grid-container {
                grid-template-columns: 1fr;
                grid-template-areas:
                    "main"
                    "topics"
                    "mindmap"
                    "quote"
                    "links"
                    "stats"
                    "wordcloud";
            }
            .topic-cards-wrapper { grid-template-columns: 1fr; }
            .topic-card { grid-column: 1 / -1; min-height: auto; }
            .topic-card > .topic-card-content-wrapper { padding-bottom: 1rem; }
            .topic-mentions { position: static; margin-top: 10px; margin-bottom: 10px; text-align: left; }
            .card-icon { font-size: 2.5rem; opacity:0.05; }
            .mindmap-card .card-icon { bottom: 15px; right: 15px; }
            .user-stats-table th, .user-stats-table td { padding: 0.5rem 0.25rem; font-size: 0.8rem; }
            .user-stats-table td { text-align: left; }
            .user-stats-table .message-count-col { text-align: center; }
            .action-button { padding: 8px 15px; font-size: 0.9rem; }
            .action-buttons-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
            .action-buttons-container .action-button { width: calc(50% - 10px); min-width: 180px; margin: 5px 0; }
            .mindmap-card .card { padding: 15px; }
            .mindmap-controls button { font-size: 0.8rem; padding: 6px 10px; }
            .modal-content { width: 100%; height: 95%; }
            .modal-close-btn { font-size: 1.8rem; top:10px; right:10px;}
        }
        @media (max-width: 480px) {
            .action-buttons-container .action-button { width: 80%; }
            .user-stats-table { display: block; overflow-x: auto; }
            .user-stats-table th, .user-stats-table td { white-space: normal; }
            .user-stats-table thead, .user-stats-table tbody, .user-stats-table tr { display: block; }
            .user-stats-table tr { border-bottom: 1px solid var(--bg-tertiary); }
            .user-stats-table th { display: none; }
            .user-stats-table td { display: block; text-align: left; border-bottom: none; padding-left: 0.5rem; }
            .user-stats-table td.message-count-col { text-align: left; }
            .user-stats-table td::before { content: attr(data-label); font-weight: bold; display: inline-block; width: 100px; margin-right: 10px; color: var(--text-primary); text-align: left; }
            .user-stats-table tr:last-child { border-bottom: none; }
        }
    </style>
</head>
<body>
    <div id="report-content-wrapper">
        <div class="grid-container">
            <div class="card main-card">
                <h1>奇安信防火墙鲲鹏适配日报<span class="brand-subtitle">由 老虎聊AI 制作</span></h1>
                <div class="date">2025年8月29日 - 2025年9月1日</div>
                <div class="meta-info">
                    <span><i class="fas fa-comment"></i> 消息数: 80+</span>
                    <span><i class="fas fa-users"></i> 活跃用户: 5</span>
                    <span><i class="fas fa-fire"></i> 热点话题: 4</span>
                </div>
                <p class="summary">本期群聊聚焦于解决奇安信防火墙在鲲鹏920S物理机上的适配问题，核心挑战在于`top`命令无法正常显示CPU占用率。讨论从内核补丁应用失败展开，深入到虚拟机与物理机环境的差异分析，并详细探讨了在无显示器硬件上通过串口安装openEuler操作系统的技术细节。最终，问题指向可能与操作系统版本（Beta对LTS）或硬件特性有关，团队正朝着安装标准LTS系统以进行纯净环境测试的方向努力。</p>
                <i class="fas fa-microchip card-icon"></i>
            </div>
            <div class="topic-cards-wrapper">
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper">
                        <h2><i class="fas fa-cogs"></i> 内核适配与环境差异</h2>
                        <div class="topic-category">技术攻坚</div>
                        <p>讨论核心围绕<span class="highlight-name">@在路上</span>的旧版内核无法应用补丁文件展开。 <span class="highlight-name">@麒麟-张玉</span>发现，在<span class="highlight-keyword">虚拟机</span>中测试正常，但在客户的<span class="highlight-keyword">物理机</span>上复现失败，揭示了测试环境与实际环境的巨大差异是定位问题的关键障碍。</p>
                        <div class="topic-keywords">
                            <span class="keyword">物理机</span><span class="keyword">虚拟机</span><span class="keyword">内核补丁</span><span class="keyword">环境差异</span>
                        </div>
                        <div class="topic-mentions"><i class="fas fa-bullhorn"></i> 提及次数: 25+</div>
                    </div>
                    <i class="fas fa-desktop card-icon"></i>
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper">
                        <h2><i class="fas fa-terminal"></i> 无头设备系统安装</h2>
                        <div class="topic-category">系统运维</div>
                        <p>由于客户设备无显示器，<span class="highlight-name">@麒麟-张玉</span>在<span class="highlight-keyword">串口安装</span>openEuler时遇到困难。 <span class="highlight-name">@Liberty.</span>提供了关键的`console`内核参数，成功解决了安装过程中的无输出问题，为后续在物理机上进行测试铺平了道路。</p>
                        <div class="topic-keywords">
                            <span class="keyword">串口安装</span><span class="keyword">openEuler</span><span class="keyword">console参数</span>
                        </div>
                        <div class="topic-mentions"><i class="fas fa-bullhorn"></i> 提及次数: 15+</div>
                    </div>
                    <i class="fas fa-plug card-icon"></i>
                </div>
                <div class="card topic-card">
                    <div class="topic-card-content-wrapper">
                        <h2><i class="fas fa-chart-line"></i> `top`命令CPU占用率诊断</h2>
                        <div class="topic-category">问题诊断</div>
                        <p>核心问题是`top`命令在物理机上无法显示CPU占用率。 <span class="highlight-name">@麒麟-张玉</span>使用加压脚本验证了CPU负载，但`top`无显示。 <span class="highlight-name">@Austin Quan</span>指出，使用的<span class="highlight-keyword">Beta版</span>系统可能是问题根源，建议更换为稳定的<span class="highlight-keyword">LTS版本</span>进行测试。</p>
                        <div class="topic-keywords">
                            <span class="keyword">top命令</span><span class="keyword">CPU占用率</span><span class="keyword">LTS vs Beta</span><span class="keyword">硬件特性</span>
                        </div>
                        <div class="topic-mentions"><i class="fas fa-bullhorn"></i> 提及次数: 20+</div>
                    </div>
                    <i class="fas fa-tachometer-alt card-icon"></i>
                </div>
            </div>
            <div class="mindmap-card-container card">
                <div class="mindmap-card">
                    <h2><i class="fas fa-sitemap"></i> 核心概念关系图</h2>
                    <div class="mindmap-controls">
                        <button id="zoomInBtn"><i class="fas fa-search-plus"></i> 放大</button>
                        <button id="zoomOutBtn"><i class="fas fa-search-minus"></i> 缩小</button>
                        <button id="downloadDiagramBtn"><i class="fas fa-download"></i> 下载导图</button>
                        <button id="fullscreenOpenBtn" class="fullscreen-toggle-btn"><i class="fas fa-expand"></i> 全屏</button>
                    </div>
                    <div class="mermaid-container" id="mainMermaidContainer">
                        <div class="mermaid" id="mindmapDiagram">
                            mindmap
                                root((鲲鹏920S适配问题))
                                    (<b>核心现象</b><br/>top无法显示CPU占用率)
                                    ::icon(fa fa-cogs)
                                    (<b>环境差异</b>)
                                    ::icon(fa fa-desktop)
                                      - 麒麟团队: 虚拟机 (测试正常)
                                      - 客户现场: 物理机 (SecGate3600)
                                    (<b>内核与补丁</b>)
                                      ::icon(fa fa-file-code)
                                      - 客户内核: 4.19.90 (2020年版本)
                                      - 麒麟提供: irq-gic-v3-its.c
                                      - 问题: Patch无法应用
                                    (<b>解决方案探索</b>)
                                      ::icon(fa fa-search)
                                      (安装标准系统)
                                        - 目标系统: openEuler
                                        - 遇到的问题: 无显示器，需串口安装
                                        - 解决: Liberty.提供console参数
                                      (版本问题)
                                        - 初步安装: Beta版 openEuler
                                        - Austin Quan建议: 使用LTS稳定版
                                    (<b>关键人物</b>)
                                      ::icon(fa fa-users)
                                      - 麒麟-张玉: 主要执行者
                                      - 在路上: 客户代表
                                      - Austin Quan: 技术顾问
                                      - Liberty.: 串口问题解决者
                        </div>
                    </div>
                    <div id="mermaid-main-feedback-message"></div>
                    <i class="fas fa-project-diagram card-icon"></i>
                </div>
            </div>
            <div class="card quote-card">
                <h2><i class="fas fa-quote-left"></i> 精彩引用</h2>
                <div class="quote">
                    "我用我们的机器测试是正常的 你们机器换不了内核"
                    <div class="quote-author">- @麒麟-张玉</div>
                </div>
                <div class="quote">
                    "在倒数第二行 f 后面➕console=ttyAMA0,115200n8 然后按ctrl+x"
                    <div class="quote-author">- @Liberty.</div>
                </div>
                <div class="quote">
                    "虚拟机可以，物理机不行，操作系统是同一个，那就是物理机某些硬件的特性导致的"
                    <div class="quote-author">- @Austin Quan</div>
                </div>
                <i class="fas fa-comment-dots card-icon"></i>
            </div>
            <div class="card links-card">
                <h2><i class="fas fa-link"></i> 重要链接与资源</h2>
                <div class="link-item">
                    <i class="fas fa-file-code link-icon"></i><span class="link-title">内核补丁文件: irq-gic-v3-its.c</span>
                </div>
                <div class="link-item">
                    <i class="fas fa-file-alt link-icon"></i><span class="link-title">测试文档: top问题验证.wps</span>
                </div>
                <div class="link-item">
                    <a href="https://dl-cdn.openeuler.openatom.cn/openEuler-20.03-LTS-SP4/ISO/aarch64/openEuler-20.03-LTS-SP4-aarch64-dvd.iso" target="_blank">
                        <i class="fas fa-compact-disc link-icon"></i><span class="link-title is-link">openEuler 20.03 LTS SP4 ISO</span>
                    </a>
                </div>
                <div class="link-item">
                    <a href="https://dl-cdn.openeuler.openatom.cn/openEuler-20.03-LTS-SP4/update/aarch64/Packages/kernel-4.19.90-2508.1.0.0339.oe2003sp4.aarch64.rpm" target="_blank">
                        <i class="fas fa-box-open link-icon"></i><span class="link-title is-link">openEuler 4.19 Kernel RPM</span>
                    </a>
                </div>
                <i class="fas fa-share-alt card-icon"></i>
            </div>
            <div class="card stats-card">
                <h2><i class="fas fa-chart-line"></i> 活跃之星</h2>
                <table class="user-stats-table">
                    <thead>
                        <tr>
                            <th class="user-name-col">用户</th>
                            <th class="message-count-col">发言数</th>
                            <th class="contribution-col">主要贡献</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-label="用户" class="user-name-col">@麒麟-张玉</td>
                            <td data-label="发言数" class="message-count-col">40+</td>
                            <td data-label="主要贡献" class="contribution-col">主导问题排查，执行内核替换、系统安装和压力测试，是解决问题的核心推动者。</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">@在路上</td>
                            <td data-label="发言数" class="message-count-col">10+</td>
                            <td data-label="主要贡献" class="contribution-col">提出问题并提供客户方环境信息、内核源码和测试反馈。</td>
                        </tr>
                        <tr>
                            <td data-label="用户" class="user-name-col">@Austin Quan</td>
                            <td data-label="发言数" class="message-count-col">15+</td>
                            <td data-label="主要贡献" class="contribution-col">提供高级技术支持，指出测试环境不一致的根本问题，并建议使用LTS稳定版系统。</td>
                        </tr>
                         <tr>
                            <td data-label="用户" class="user-name-col">@Liberty.</td>
                            <td data-label="发言数" class="message-count-col">5+</td>
                            <td data-label="主要贡献" class="contribution-col">提供了在无显示器设备上进行串口安装的关键技术参数，解决了卡点问题。</td>
                        </tr>
                    </tbody>
                </table>
                <i class="fas fa-user-friends card-icon"></i>
            </div>
            <div class="card wordcloud-card">
                <h2><i class="fas fa-cloud"></i> 词云</h2>
                <div class="wordcloud">
                    <span class="wordcloud-item size-5">内核</span>
                    <span class="wordcloud-item size-5">openEuler</span>
                    <span class="wordcloud-item size-5">测试</span>
                    <span class="wordcloud-item size-4">物理机</span>
                    <span class="wordcloud-item size-4">虚拟机</span>
                    <span class="wordcloud-item size-4">系统</span>
                    <span class="wordcloud-item size-3">安装</span>
                    <span class="wordcloud-item size-3">串口</span>
                    <span class="wordcloud-item size-3">CPU</span>
                    <span class="wordcloud-item size-2">top</span>
                    <span class="wordcloud-item size-2">版本</span>
                    <span class="wordcloud-item size-1">源码</span>
                </div>
                <i class="fas fa-tags card-icon"></i>
            </div>
        </div>
        <div class="footer">
            <div class="brand-footer">
                <p><strong>作者：老虎聊AI</strong></p>
                <p>微信：go_home_with_you | 公众号：老虎聊AI</p>
                <p>专业领域：AI智能体与自动化解决方案</p>
                <p class="tech-stack">技术支持：基于 n8n + ChatlogMCP + AI 构建</p>
                <p>© 2025 老虎聊AI | 智能群聊分析工具</p>
            </div>
             <p>本报告由AI自动生成，仅供参考，不代表所有群成员观点。</p>
        </div>
    </div>
    <div class="action-buttons-container">
        <button id="screenshotToClipboardBtn" class="action-button"><i class="fas fa-clipboard"></i> 拷贝截图</button>
        <button id="screenshotDownloadBtn" class="action-button"><i class="fas fa-camera"></i> 下载截图</button>
        <button id="copyHtmlBtn" class="action-button"><i class="fas fa-copy"></i> 拷贝源码</button>
        <button id="downloadHtmlBtn" class="action-button"><i class="fas fa-download"></i> 下载报告</button>
    </div>
    <div id="feedback-message"></div>
    <div id="fullscreenModal" class="modal-overlay">
        <div class="modal-content card">
            <button id="fullscreenCloseBtn" class="modal-close-btn" aria-label="关闭全屏">&times;</button>
            <h2><i class="fas fa-sitemap"></i> 核心概念关系图 (全屏)</h2>
            <div class="mindmap-controls">
                <button id="modalZoomInBtn"><i class="fas fa-search-plus"></i> 放大</button>
                <button id="modalZoomOutBtn"><i class="fas fa-search-minus"></i> 缩小</button>
                <button id="modalDownloadDiagramBtn"><i class="fas fa-download"></i> 下载导图</button>
            </div>
            <div class="mermaid-container" id="modalMermaidContainer"></div>
            <div id="mermaid-modal-feedback-message"></div>
        </div>
    </div>
<script>
    // --- Mermaid Diagram JavaScript START ---
    // --- Global Variables for Mermaid ---
    let mainCurrentScale = 1;
    let modalCurrentScale = 1;
    let currentMindmapDefinition = ''; // Store the current definition
    // --- DOM Elements for Mermaid ---
    const mainZoomInBtn = document.getElementById('zoomInBtn');
    const mainZoomOutBtn = document.getElementById('zoomOutBtn');
    const mainDownloadDiagramBtn = document.getElementById('downloadDiagramBtn');
    const mainMermaidContainer = document.getElementById('mainMermaidContainer');
    const mermaidMainFeedbackMessage = document.getElementById('mermaid-main-feedback-message');
    const mainMindmapDiagramDiv = document.getElementById('mindmapDiagram');
    const fullscreenOpenBtn = document.getElementById('fullscreenOpenBtn');
    const fullscreenModal = document.getElementById('fullscreenModal');
    const fullscreenCloseBtn = document.getElementById('fullscreenCloseBtn');
    const modalMermaidContainer = document.getElementById('modalMermaidContainer');
    const modalZoomInBtn = document.getElementById('modalZoomInBtn');
    const modalZoomOutBtn = document.getElementById('modalZoomOutBtn');
    const modalDownloadDiagramBtn = document.getElementById('modalDownloadDiagramBtn');
    const mermaidModalFeedbackMessage = document.getElementById('mermaid-modal-feedback-message');
    // --- Mermaid Initialization ---
    if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            fontFamily: '"Inter", sans-serif',
            mindmap: { padding: 15 }
        });
    } else {
        console.error("Mermaid library not loaded.");
        if(mermaidMainFeedbackMessage) mermaidMainFeedbackMessage.textContent = "错误：Mermaid库未能加载。";
    }
    // --- Helper Functions for Mermaid ---
    function showMermaidFeedback(element, message, type = 'info', duration = 3000) {
        if (element) {
            element.textContent = message;
            element.className = type;
            element.style.display = 'block';
            setTimeout(() => {
                element.textContent = '';
                element.className = '';
                element.style.display = 'none';
            }, duration);
        }
    }
    function applySvgScale(svgElement, scale) {
        if (svgElement) {
            svgElement.style.transform = `scale(${scale})`;
            svgElement.style.transformOrigin = 'center center';
        }
    }
    function makeDraggable(containerElement) {
        let isDragging = false;
        let startX, startY, scrollLeftStart, scrollTopStart;
        if (!containerElement) return;
        containerElement.addEventListener('mousedown', (e) => {
            if (e.button !== 0) return;
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('[onclick]')) return;
            if (e.target === containerElement) {
                const verticalScrollbarVisible = containerElement.scrollHeight > containerElement.clientHeight;
                const horizontalScrollbarVisible = containerElement.scrollWidth > containerElement.clientWidth;
                const clickedOnVerticalScrollbar = verticalScrollbarVisible && e.offsetX >= containerElement.clientWidth - 17;
                const clickedOnHorizontalScrollbar = horizontalScrollbarVisible && e.offsetY >= containerElement.clientHeight - 17;
                if (clickedOnVerticalScrollbar || clickedOnHorizontalScrollbar) return;
            }
            isDragging = true;
            startX = e.pageX; startY = e.pageY;
            scrollLeftStart = containerElement.scrollLeft; scrollTopStart = containerElement.scrollTop;
            containerElement.classList.add('dragging');
        });
        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const deltaX = e.pageX - startX; const deltaY = e.pageY - startY;
            containerElement.scrollLeft = scrollLeftStart - deltaX;
            containerElement.scrollTop = scrollTopStart - deltaY;
        });
        document.addEventListener('mouseup', (e) => {
            if (e.button !== 0 || !isDragging) return;
            isDragging = false;
            containerElement.classList.remove('dragging');
        });
        containerElement.addEventListener('touchstart', (e) => {
            if (e.target.closest('button') || e.target.closest('a') || e.target.closest('[onclick]')) return;
            if (e.touches.length === 1) {
                isDragging = true;
                const touch = e.touches[0];
                startX = touch.pageX;
                startY = touch.pageY;
                scrollLeftStart = containerElement.scrollLeft;
                scrollTopStart = containerElement.scrollTop;
                containerElement.classList.add('dragging');
            }
        }, { passive: true });
        document.addEventListener('touchmove', (e) => {
            if (!isDragging || e.touches.length !== 1) return;
            const touch = e.touches[0];
            const deltaX = touch.pageX - startX;
            const deltaY = touch.pageY - startY;
            containerElement.scrollLeft = scrollLeftStart - deltaX;
            containerElement.scrollTop = scrollTopStart - deltaY;
        });
        document.addEventListener('touchend', (e) => {
            if (!isDragging) return;
            isDragging = false;
            containerElement.classList.remove('dragging');
        });
    }
    async function downloadMermaidAsSVG(svgElement, baseFilename, feedbackElem) {
        if (svgElement && svgElement.innerHTML.trim() !== "") {
            try {
                const svgData = new XMLSerializer().serializeToString(svgElement);
                const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${baseFilename}.svg`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showMermaidFeedback(feedbackElem, `${baseFilename}.svg 已下载!`, 'success');
            } catch (error) {
                console.error(`Error during SVG download for ${baseFilename}:`, error);
                showMermaidFeedback(feedbackElem, `下载 ${baseFilename}.svg 失败: ${error.message}`, 'error');
            }
        } else {
            showMermaidFeedback(feedbackElem, '无法下载：图表内容为空。', 'error');
        }
    }
    async function renderDiagram(definition, targetContainer, scaleVariableRef, feedbackElem, uniqueSvgId) {
        if (!targetContainer) {
            console.error("Target container for Mermaid diagram not found.");
            return null;
        }
        targetContainer.innerHTML = '<p style="text-align:center; padding:20px;">图表加载中...</p>';
        targetContainer.classList.remove('empty');
        if (!definition || definition.trim() === "" || definition.trim().toLowerCase() === "mindmap") {
            targetContainer.innerHTML = '';
            targetContainer.classList.add('empty');
            return null;
        }
        currentMindmapDefinition = definition;
        try {
            if (typeof mermaid === 'undefined') throw new Error("Mermaid library is not available.");
            const {svg, bindFunctions} = await mermaid.render(uniqueSvgId, definition);
            targetContainer.innerHTML = svg;
            if (bindFunctions) bindFunctions(targetContainer);
            const svgElement = targetContainer.querySelector('svg');
            if (svgElement) {
                if (targetContainer === mainMermaidContainer) mainCurrentScale = 1;
                else if (targetContainer === modalMermaidContainer) modalCurrentScale = 1;
                applySvgScale(svgElement, scaleVariableRef.value);
                makeDraggable(targetContainer);
                return svgElement;
            } else {
                targetContainer.innerHTML = '';
                targetContainer.classList.add('empty');
                showMermaidFeedback(feedbackElem, '图表生成了，但未找到SVG内容。', 'error');
                return null;
            }
        } catch (error) {
            console.error("Error rendering Mermaid:", error);
            targetContainer.innerHTML = `<p style="color:red; text-align:center; padding:20px;">渲染图表时出错: ${error.message}</p>`;
            showMermaidFeedback(feedbackElem, `渲染图表时出错: ${error.message}`, 'error', 5000);
            return null;
        }
    }
    // --- Main Mindmap Logic ---
    if(mainZoomInBtn) mainZoomInBtn.addEventListener('click', () => {
        mainCurrentScale += 0.1;
        const svg = mainMermaidContainer.querySelector('svg');
        applySvgScale(svg, mainCurrentScale);
    });
    if(mainZoomOutBtn) mainZoomOutBtn.addEventListener('click', () => {
        if (mainCurrentScale > 0.2) {
            mainCurrentScale -= 0.1;
            const svg = mainMermaidContainer.querySelector('svg');
            applySvgScale(svg, mainCurrentScale);
        }
    });
    if(mainDownloadDiagramBtn) mainDownloadDiagramBtn.addEventListener('click', () => {
        const svg = mainMermaidContainer.querySelector('svg');
        downloadMermaidAsSVG(svg, '核心概念关系图', mermaidMainFeedbackMessage);
    });
    // --- Fullscreen Modal Logic for Mermaid ---
    if(fullscreenOpenBtn) fullscreenOpenBtn.addEventListener('click', async () => {
        if (!currentMindmapDefinition || currentMindmapDefinition.trim() === "" || currentMindmapDefinition.trim().toLowerCase() === "mindmap") {
             showMermaidFeedback(mermaidMainFeedbackMessage, '请先生成一个有效的导图才能全屏查看。', 'info');
             return;
        }
        if(fullscreenModal) fullscreenModal.classList.add('active');
        document.body.classList.add('modal-active');
        modalCurrentScale = mainCurrentScale;
        await renderDiagram(currentMindmapDefinition, modalMermaidContainer, {value: modalCurrentScale}, mermaidModalFeedbackMessage, 'modalGeneratedSvgId');
    });
    if(fullscreenCloseBtn) fullscreenCloseBtn.addEventListener('click', () => {
        if(fullscreenModal) fullscreenModal.classList.remove('active');
        document.body.classList.remove('modal-active');
        if(modalMermaidContainer) {
            modalMermaidContainer.innerHTML = '';
            modalMermaidContainer.classList.add('empty');
        }
    });
    if(modalZoomInBtn) modalZoomInBtn.addEventListener('click', () => {
        modalCurrentScale += 0.1;
        const svg = modalMermaidContainer.querySelector('svg');
        applySvgScale(svg, modalCurrentScale);
    });
    if(modalZoomOutBtn) modalZoomOutBtn.addEventListener('click', () => {
        if (modalCurrentScale > 0.2) {
            modalCurrentScale -= 0.1;
            const svg = modalMermaidContainer.querySelector('svg');
            applySvgScale(svg, modalCurrentScale);
        }
    });
    if(modalDownloadDiagramBtn) modalDownloadDiagramBtn.addEventListener('click', () => {
        const svg = modalMermaidContainer.querySelector('svg');
        downloadMermaidAsSVG(svg, '核心概念关系图-全屏', mermaidModalFeedbackMessage);
    });
    // --- Initial Setup for Mermaid ---
    async function initializeMainDiagram() {
        if (mainMindmapDiagramDiv && mainMermaidContainer) {
            const initialDefinition = mainMindmapDiagramDiv.textContent.trim();
            if (initialDefinition) {
                await renderDiagram(initialDefinition, mainMermaidContainer, { value: mainCurrentScale }, mermaidMainFeedbackMessage, 'initialMainDiagramSvg');
            } else {
                mainMermaidContainer.classList.add('empty');
            }
        } else {
             if(mermaidMainFeedbackMessage && !mainMermaidContainer) showMermaidFeedback(mermaidMainFeedbackMessage, '错误：导图容器未找到。', 'error');
        }
    }
    // --- Mermaid Diagram JavaScript END ---
    // --- Report Page JavaScript START ---
    function getCssVariable(variableName, defaultValue = null) {
        const value = getComputedStyle(document.documentElement).getPropertyValue(variableName).trim();
        return value || defaultValue;
    }
    function getWebpageNameForFilename() {
        const pageTitleTag = document.querySelector('title');
        let baseName = '群聊日报';
        if (pageTitleTag && pageTitleTag.textContent) {
            const fullTitle = pageTitleTag.textContent.trim();
            const titleParts = fullTitle.split(' - ');
            if (titleParts.length > 0 && titleParts[0].trim() !== "") {
                baseName = titleParts[0].trim();
            }
        }
        return baseName;
    }
    function getDateStringForFilename() {
        const reportDateElement = document.querySelector('.main-card .date');
        let dateStr = "未指定日期";
        if (reportDateElement && reportDateElement.textContent) {
            dateStr = reportDateElement.textContent.trim();
        }
        return dateStr;
    }
    function sanitizeFilename(filename) {
        return filename.replace(/[^a-z0-9\u4e00-\u9fa5_\-\.\(\)\[\]\s]/gi, '_').replace(/_+/g, '_');
    }
    function showReportFeedbackMessage(message, type = 'info', duration = 3000) {
        const feedbackElement = document.getElementById('feedback-message');
        if (feedbackElement) {
            feedbackElement.textContent = message;
            feedbackElement.className = type;
            setTimeout(() => {
                feedbackElement.textContent = '';
                feedbackElement.className = '';
            }, duration);
        }
    }
    async function captureScreenshot(elementToCapture) {
        await document.fonts.ready;
        return html2canvas(elementToCapture, {
            useCORS: true,
            scale: window.devicePixelRatio || 1,
            logging: false,
            backgroundColor: getCssVariable('--bg-primary', '#f5f4ee'),
            scrollX: -window.scrollX,
            scrollY: -window.scrollY,
           windowWidth: document.documentElement.scrollWidth,
           windowHeight: document.documentElement.scrollHeight,
           onclone: function(clonedDoc) {
               const highlightElements = clonedDoc.querySelectorAll('.highlight-keyword');
               highlightElements.forEach(el => {
                   el.style.display = 'inline';
                   el.style.padding = '1px 2px';
                   el.style.lineHeight = '1.2';
                   el.style.boxDecorationBreak = 'clone';
                   el.style.webkitBoxDecorationBreak = 'clone';
               });
           }
        });
    }
    const screenshotToClipboardBtn = document.getElementById('screenshotToClipboardBtn');
    if(screenshotToClipboardBtn) screenshotToClipboardBtn.addEventListener('click', async function() {
        const reportContent = document.getElementById('report-content-wrapper');
        if (!reportContent) {
            showReportFeedbackMessage('截图错误: 未找到报告内容。', 'error');
            return;
        }
        const actionButtons = document.querySelector('.action-buttons-container');
        const feedbackMsgElement = document.getElementById('feedback-message');
        const originalButtonText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 处理中...';
        this.disabled = true;
        if(actionButtons) actionButtons.style.visibility = 'hidden';
        if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'hidden';
        try {
            const canvas = await captureScreenshot(reportContent);
            canvas.toBlob(async function(blob) {
                if (blob) {
                    try {
                        if (navigator.clipboard && navigator.clipboard.write) {
                            await navigator.clipboard.write([
                                new ClipboardItem({ 'image/png': blob })
                            ]);
                            showReportFeedbackMessage('截图已拷贝到剪贴板!', 'success');
                        } else {
                            showReportFeedbackMessage('截图已生成，但您的浏览器不支持直接拷贝图片。请尝试下载截图。', 'error', 5000);
                        }
                    } catch (copyError) {
                        console.error('拷贝到剪贴板失败:', copyError);
                        showReportFeedbackMessage('拷贝截图到剪贴板失败: ' + copyError.message, 'error', 5000);
                    }
                } else {
                    throw new Error('无法将Canvas转换为Blob。');
                }
            }, 'image/png');
        } catch (error) {
            console.error('截图捕获失败:', error);
            showReportFeedbackMessage('截图捕获失败: ' + error.message, 'error');
        } finally {
            if(actionButtons) actionButtons.style.visibility = 'visible';
            if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'visible';
            this.innerHTML = originalButtonText;
            this.disabled = false;
        }
    });
    const screenshotDownloadBtn = document.getElementById('screenshotDownloadBtn');
    if(screenshotDownloadBtn) screenshotDownloadBtn.addEventListener('click', async function() {
        const reportContent = document.getElementById('report-content-wrapper');
        if (!reportContent) {
            showReportFeedbackMessage('截图错误: 未找到报告内容。', 'error');
            return;
        }
        const actionButtons = document.querySelector('.action-buttons-container');
        const feedbackMsgElement = document.getElementById('feedback-message');
        const originalButtonText = this.innerHTML;
        this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 生成中...';
        this.disabled = true;
        if(actionButtons) actionButtons.style.visibility = 'hidden';
        if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'hidden';
        try {
            const canvas = await captureScreenshot(reportContent);
            const image = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            const webpageName = getWebpageNameForFilename();
            const dateString = getDateStringForFilename();
            let filename = sanitizeFilename(webpageName + ' ' + dateString) + '.png';
            link.href = image;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showReportFeedbackMessage('截图已下载!', 'success');
        } catch (error) {
            console.error('下载截图失败:', error);
            showReportFeedbackMessage('下载截图失败: ' + error.message, 'error');
        } finally {
            if(actionButtons) actionButtons.style.visibility = 'visible';
            if(feedbackMsgElement) feedbackMsgElement.style.visibility = 'visible';
            this.innerHTML = originalButtonText;
            this.disabled = false;
        }
    });
    const downloadHtmlBtn = document.getElementById('downloadHtmlBtn');
    if(downloadHtmlBtn) downloadHtmlBtn.addEventListener('click', function() {
        try {
            const htmlContent = document.documentElement.outerHTML;
            const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8' });
            const link = document.createElement('a');
            const webpageName = getWebpageNameForFilename();
            const dateString = getDateStringForFilename();
            let filename = sanitizeFilename(webpageName + ' ' + dateString) + '.html';
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
            showReportFeedbackMessage('HTML报告已下载!', 'success');
        } catch (error) {
            console.error('下载HTML失败:', error);
            showReportFeedbackMessage('下载HTML失败: ' + error.message, 'error');
        }
    });
    const copyHtmlBtn = document.getElementById('copyHtmlBtn');
    if(copyHtmlBtn) copyHtmlBtn.addEventListener('click', function() {
        const htmlContent = document.documentElement.outerHTML;
        const Gthis = this;
        const originalButtonHTML = Gthis.innerHTML;
        const textarea = document.createElement('textarea');
        textarea.value = htmlContent;
        textarea.style.position = 'fixed';
        textarea.style.top = '-9999px';
        textarea.style.left = '-9999px';
        document.body.appendChild(textarea);
        try {
            textarea.select();
            textarea.setSelectionRange(0, textarea.value.length);
            if (document.execCommand('copy')) {
                Gthis.innerHTML = '<i class="fas fa-check"></i> 已拷贝!';
                showReportFeedbackMessage('HTML已拷贝到剪贴板!', 'success', 2000);
            } else {
                Gthis.innerHTML = '<i class="fas fa-times"></i> 拷贝失败';
                showReportFeedbackMessage('拷贝失败。您的浏览器可能不支持此操作。', 'error', 2000);
            }
        } catch (err) {
            Gthis.innerHTML = '<i class="fas fa-times"></i> 拷贝出错';
            showReportFeedbackMessage('拷贝出错: ' + err.message, 'error', 2000);
            console.error('拷贝HTML源码出错:', err);
        } finally {
            setTimeout(function() {
                Gthis.innerHTML = originalButtonHTML;
            }, 2000);
            document.body.removeChild(textarea);
        }
    });
    function adjustActionButtonsLayout() {
        const actionButtonsContainer = document.querySelector('.action-buttons-container');
        if (actionButtonsContainer) {
            if (window.innerWidth<= 768) {
                actionButtonsContainer.style.display = 'flex';
                actionButtonsContainer.style.flexWrap = 'wrap';
                actionButtonsContainer.style.justifyContent = 'center';
            } else {
                actionButtonsContainer.style.display = 'block';
                actionButtonsContainer.style.flexWrap = 'nowrap';
            }
        }
    }
    window.addEventListener('load', () => {
        initializeMainDiagram();
        adjustActionButtonsLayout();
    });
    window.addEventListener('resize', adjustActionButtonsLayout);
    // --- Report Page JavaScript END ---
</script>
</body>
</html>